{% extends 'layout.html' %}
{% load humanize %}
{% block content %}
{% for post in posts %}
<div class="col" style="text-align: center;">
  <h1>Bienvenidos a Banban's pizza</h1>
</div>

<article>
    <div class="container-article">
        <img src="../../static/pizza.jpg">
        <div>
          <h2 class="username"><a href="{% url 'profile' post.user.username %}">@{{ post.user.username }}</a></h2>
          <i class="clock"></i>
          <time data-time="#">{{ post.timestamp|naturaltime }}</time>
          <div class="post">{{ post.content }}</div>
      </div>
    </div>
</article>
{% endfor %}
<body>
  <header class="container-fluid bg-blue position-sticky top-0">
    <ul
      class="nav nav-pills mb-3 py-3 container"
      id="pills-tab"
      role="tablist"
    >
      <li class="nav-item" role="presentation">
        <a
          class="nav-link"
          id="pills-home-tab"
          data-bs-toggle="pill"
          data-bs-target="#pills-home"
          type="button"
          role="tab"
          aria-controls="pills-home"
          aria-selected="true"
          >Inicio</a
        >
      </li>
      <li class="nav-item" role="presentation">
        <a
          class="nav-link active"
          id="pills-profile-tab"
          data-bs-toggle="pill"
          data-bs-target="#pills-profile"
          type="button"
          role="tab"
          aria-controls="pills-profile"
          aria-selected="false"
          >Productos</a
        >
      </li>
      <li class="nav-item" role="presentation">
        <a
          class="nav-link"
          id="pills-contact-tab"
          data-bs-toggle="pill"
          data-bs-target="#pills-contact"
          type="button"
          role="tab"
          aria-controls="pills-contact"
          aria-selected="false"
          >Carrito</a
        >
      </li>
    </ul>
  </header>

  <div class="alert container position-sticky top-0 alert-primary hide" role="alert">
  Producto Añadido al carrito!
  </div>
  <div class="alert container position-sticky top-0 alert-danger remove" role="alert">
    Producto removido!
  </div>

  <div class="tab-content" id="pills-tabContent">
    <div
      class="tab-pane fade "
      id="pills-home"
      role="tabpanel"
      aria-labelledby="pills-home-tab"
    >
    </div>
    <div
      class="tab-pane fade show active container"
      id="pills-profile"
      role="tabpanel"
      aria-labelledby="pills-profile-tab"
    >
      <h2 class="h4 m-4 text-primary">Menú</h2>
      <ul class="navbar navbar-expand-lg navbar-light bg-light border">
        {%for item_cat in item_cats %}
        <li class="nav-item">
            <a class="nav-link" href="#{{item_cat.name}}">{{item_cat.name}}</a>
        </li>
        {%endfor%}
      </ul>

      <div class="row row-cols-sm-1">
        {% block tt %}
        {% if not item_cats %}
        <h1>No Items! Please add some items through admin interface <a href="/admin" class="badge badge-secondary">Admin Panel</a></h1>
        {%endif%}
        {%endblock%}
        {% block body %}
            {%for item_cat in item_cats %}
            <h3 id="{{item_cat.name}}" style="text-align: center;"><strong>{{item_cat.name}}</strong></h3>
            <div class="row row-cols-1 row-cols-md-3">
                {% for item in items %}
                    {% if item.category == item_cat %}
                    <div class="col mb-4">
                        <div class="card h-100"">
                            <div class="card-body">
                                <h5 class="card-title">
                                  <img src="../../static/pizza.jpg" style="width:20%">
                                    <strong>
                                        {{item.name}} 
                                        {%if item.item_type != none %}
                                            <p>Oferta</p>
                                            
                                            [ <span class="text-muted">{{item.item_type}}</span> ]
                                        {%endif%}
                                    </strong>
                                    <button style="float: right;" class="btn btn-outline-primary" data-toggle="modal" data-target="#item-{{item.id}}-modal">Add to cart</button>
                                </h5>
                                <p class="card-text">Pequeña: {{item.price_small}}<br>Grande: {{item.price_large}} </strong></p>
                            </div>
                        </div>
                    </div>
        
                    {%endif%}
                {%endfor%}
            </div><hr>
                {% for item in items %}
                    {% if item.category == item_cat %}
                    <!-- Create modal for this item -->
                    <div class="modal fade" id="item-{{item.id}}-modal" tabindex="-1" role="dialog" aria-labelledby="item-{{item.id}}-modal-CenterTitle" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLongTitle">Customize <strong>{{item.name}}</strong></h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                            </div>
                            <div class="modal-body">
                                <form onsubmit="AlertUser('{{item.id}}')" action="{% url 'add_item' %}" method="POST">
                                    {%csrf_token%}
                                    <input name="item-id" type="hidden" value="{{item.id}}">
                                    {% if item.max_topping %}
                                    <input name="max-topping" type="hidden" value="{{item.max_topping}}">
                                        {% for i in item.max_topping %}
                                            <div class="form-group">
                                            <label for="exampleFormControlSelect1">Select Topping {{i}}</label>
                                            <select name="select-{{i}}" class="form-control" id="exampleFormControlSelect1">
                                                {% for topping in toppings %}
                                                <option value="{{topping.id}}">{{topping.name}}</option>
                                                {%endfor%}
                                            </select>
                                            </div>
                                        {%endfor%}
                                    {%endif%}
                                    <div class="form-group">
                                    <label for="exampleFormControlSelect1">Select Size</label>
                                    <select name="size-select" class="form-control" id="exampleFormControlSelect1">
                                        {% if item.price_small %}
                                            <option value="S">Pequeña</option>
                                        {%endif%}
                                        {% if item.price_large %}
                                            <option value="L">Grande</option>
                                        {%endif%}
                                    </select>
                                    </div>
                                    <button style="float: right;" type="submit" class="btn btn-primary">Añadir al carrito</button>
                                </form>
                            </div>
                        </div>
                        </div>
                    </div>
                    {%endif%}
                {%endfor%}
            {%endfor%}
        {%endblock%}
      </div>

    

    </div>
    <div
      class="tab-pane fade carrito"
      id="pills-contact"
      role="tabpanel"
      aria-labelledby="pills-contact-tab"
    >
    <br>
    <table class="table table-dark table-hover">
      <thead>
        <tr class="text-primary">
          <th scope="col">#</th>
          <th scope="col">Productos</th>
          <th scope="col">Precio</th>
          <th scope="col">Cantidad</th>
        </tr>
      </thead>
      <tbody class="tbody">
        
      
        
      </tbody>
    </table>
    <br><br>
    <div class="row mx-4">
      <div class="col">
        <h3 class="itemCartTotal text-white" style="background: black;">Total: 0</h3>
      </div>
      <div class="col d-flex justify-content-end">
        <a href="#" class="btn btn-success">COMPRAR</a>
      </div>
    </div>
    
    </div>
  </div>

  <footer class="bg-dark p-3 mt-5">
    <p class="text-center m-0 text-muted">Gracias por Ver y no comprar ☻</p>
  </footer>

  <script
    src="https://code.jquery.com/jquery-3.5.1.js"
    integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
    crossorigin="anonymous"
  ></script>
</body>
{% endblock %}